local keywordHandler = KeywordHandler:new()
local npcHandler = NpcHandler:new(keywordHandler)
NpcSystem.parseParameters(npcHandler)
local talkState = {}
 
function onCreatureAppear(cid)              npcHandler:onCreatureAppear(cid)            end
function onCreatureDisappear(cid)           npcHandler:onCreatureDisappear(cid)         end
function onCreatureSay(cid, type, msg)          npcHandler:onCreatureSay(cid, type, msg)        end
function onThink()                  npcHandler:onThink()                    end
 
local shopModule = ShopModule:new()
npcHandler:addModule(shopModule)
 
shopModule:addBuyableItemContainer({'bp slhp'}, 2000, 8704, 400, 50, 'backpack of small health potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp mws'}, 2000, 2293, 350, 50, 'backpack of magic walls (800 use\'s)')
shopModule:addBuyableItemContainer({'bp hp'}, 2000, 7618, 900, 50, 'backpack of health potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp mp'}, 2001, 7620, 1000, 50, 'backpack of mana potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp shp'}, 2000, 7588, 2000, 50, 'backpack of strong health potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp smp'}, 2001, 7589, 1600, 50, 'backpack of strong mana potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp ghp'}, 2000, 7591, 3800, 50, 'backpack of great health potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp gmp'}, 2001, 7590, 2400, 50, 'backpack of great mana potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp gsp'}, 1999, 8472, 3800, 50, 'backpack of great spirit potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp uhp'}, 2000, 8473, 6200, 50, 'backpack of ultimate health potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp ap'}, 2002, 8474, 2000, 50, 'backpack of antidote potions (800 use\'s)')
shopModule:addBuyableItemContainer({'bp animate dead'}, 2001, 2316, 7500, 50, 'backpack of animate dead runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp antidote'}, 2003, 2266, 1300, 50, 'backpack of antidote runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp ava'}, 2002, 2274, 3600, 50, 'backpack of avalanche runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp blank'}, 2003, 2260, 200, 50, 'backpack of blank runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp chameleon'}, 3940, 2291, 4200, 50, 'backpack of chameleon runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp convince creature'}, 3940, 2290, 1600, 50, 'backpack of convince creature runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp desintegrate'}, 2001, 2310, 1600, 50, 'backpack of desintegrate runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp destroy field'}, 2003, 2261, 900, 50, 'backpack of destroy field runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp energy bomb'}, 2003, 2262, 6500, 50, 'backpack of backpack of energy bomb runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp energy field'}, 5949, 2277, 2300, 50, 'backpack of backpack of energy field runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp energy wall'}, 5949, 2279, 6800, 50, 'backpack of backpack of energy wall runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp exp'}, 2001, 2313, 3800, 50, 'backpack of explosion runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp fire bomb'}, 2000, 2305, 4700, 50, 'backpack of fire bomb runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp fire field'}, 2000, 2301, 1700, 50, 'backpack of fire field runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp fire wall'}, 2000, 2303, 4900, 50, 'backpack of fire wall runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp fireball'}, 2000, 2302, 3000, 50, 'backpack of fireball runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp gfb'}, 2000, 2304, 3600, 50, 'backpack of great fireball runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp hmm'}, 2001, 2311, 2400, 50, 'backpack of heavy magic missile runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp holy missile'}, 2004, 2295, 1600, 50, 'backpack of holy missile runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp icicle'}, 2002, 2271, 3000, 50, 'backpack of icicle runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp ih'}, 2003, 2265, 1900, 50, 'backpack of intense healing runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp lmm'}, 3940, 2287, 800, 50, 'backpack of light magic missile runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp mwall'}, 2004, 2293, 7000, 50, 'backpack of magic wall runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp para'}, 5949, 2278, 14000, 50, 'backpack of paralyze runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp poison bomb'}, 3940, 2286, 3400, 50, 'backpack of poison bomb runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp poison field'}, 3940, 2285, 1300, 50, 'backpack of poison field runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp poison wall'}, 3940, 2289, 4200, 50, 'backpack of poison wall runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp soulfire'}, 2000, 2308, 2800, 50, 'backpack of soulfire runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp stalagmite'}, 3940, 2292, 2400, 50, 'backpack of stalagmite runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp stone shower'}, 3940, 2288, 3000, 50, 'backpack of stone shower runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp sd'}, 2003, 2268, 6500, 50, 'backpack of sudden death runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp thunderstorm'}, 2001, 2315, 3000, 50, 'backpack of thunderstorm runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp uh'}, 2002, 2273, 3500, 50, 'backpack of ultimate healing runes (800 use\'s)')
shopModule:addBuyableItemContainer({'bp wild growth'}, 2002, 2269, 6400, 50, 'backpack of wild growth runes (800 use\'s)')
 
function creatureSayCallback(cid, type, msg)
    if(not npcHandler:isFocused(cid)) then
        return false
    end

    return true
end
 
npcHandler:setCallback(CALLBACK_MESSAGE_DEFAULT, creatureSayCallback)
npcHandler:addModule(FocusModule:new())
 
-- shopModule:addBuyableItemContainer({'bp slhp'}, 2000, 8704, 400, 1, 'backpack of small health potions')
--shopModule:addBuyableItemContainer({'bp mws'}, 2000, 2293, 350, 5, 'backpack of magic walls')
--shopModule:addBuyableItemContainer({'bp hp'}, 2000, 7618, 900, 1, 'backpack of health potions')
--shopModule:addBuyableItemContainer({'bp mp'}, 2001, 7620, 1000, 1, 'backpack of mana potions')
--shopModule:addBuyableItemContainer({'bp shp'}, 2000, 7588, 2000, 1, 'backpack of strong health potions')
--shopModule:addBuyableItemContainer({'bp smp'}, 2001, 7589, 1600, 1, 'backpack of strong mana potions')
--shopModule:addBuyableItemContainer({'bp ghp'}, 2000, 7591, 3800, 1, 'backpack of great health potions')
--shopModule:addBuyableItemContainer({'bp gmp'}, 2001, 7590, 2400, 1, 'backpack of great mana potions')
--shopModule:addBuyableItemContainer({'bp gsp'}, 1999, 8472, 3800, 1, 'backpack of great spirit potions')
--shopModule:addBuyableItemContainer({'bp uhp'}, 2000, 8473, 6200, 1, 'backpack of ultimate health potions')
--shopModule:addBuyableItemContainer({'bp ap'}, 2002, 8474, 2000, 1, 'backpack of antidote potions')
--shopModule:addBuyableItemContainer({'bp animate dead'}, 2001, 2316, 7500, 1, 'backpack of animate dead runes')
--shopModule:addBuyableItemContainer({'bp antidote'}, 2003, 2266, 1300, 1, 'backpack of antidote runes')
--shopModule:addBuyableItemContainer({'bp ava'}, 2002, 2274, 3600, 4, 'backpack of avalanche runes')
--shopModule:addBuyableItemContainer({'bp blank'}, 2003, 2260, 200, 1, 'backpack of blank runes')
--shopModule:addBuyableItemContainer({'bp chameleon'}, 3940, 2291, 4200, 1, 'backpack of chameleon runes')
--shopModule:addBuyableItemContainer({'bp convince creature'}, 3940, 2290, 1600, 1, 'backpack of convince creature runes')
--shopModule:addBuyableItemContainer({'bp desintegrate'}, 2001, 2310, 1600, 3, 'backpack of desintegrate runes')
--shopModule:addBuyableItemContainer({'bp destroy field'}, 2003, 2261, 900, 3, 'backpack of destroy field runes')
--shopModule:addBuyableItemContainer({'bp energy bomb'}, 2003, 2262, 6500, 2, 'backpack of backpack of energy bomb runes')
--shopModule:addBuyableItemContainer({'bp energy field'}, 5949, 2277, 2300, 3, 'backpack of backpack of energy field runes')
--shopModule:addBuyableItemContainer({'bp energy wall'}, 5949, 2279, 6800, 4, 'backpack of backpack of energy wall runes')
--shopModule:addBuyableItemContainer({'bp exp'}, 2001, 2313, 3800, 6, 'backpack of explosion runes')
--shopModule:addBuyableItemContainer({'bp fire bomb'}, 2000, 2305, 4700, 2, 'backpack of fire bomb runes')
--shopModule:addBuyableItemContainer({'bp fire field'}, 2000, 2301, 1700, 3, 'backpack of fire field runes')
--shopModule:addBuyableItemContainer({'bp fire wall'}, 2000, 2303, 4900, 4, 'backpack of fire wall runes')
--shopModule:addBuyableItemContainer({'bp fireball'}, 2000, 2302, 3000, 5, 'backpack of fireball runes')
--shopModule:addBuyableItemContainer({'bp gfb'}, 2000, 2304, 3600, 4, 'backpack of great fireball runes')
--shopModule:addBuyableItemContainer({'bp hmm'}, 2001, 2311, 2400, 10, 'backpack of heavy magic missile runes')
--shopModule:addBuyableItemContainer({'bp holy missile'}, 2004, 2295, 1600, 5, 'backpack of holy missile runes')
--shopModule:addBuyableItemContainer({'bp icicle'}, 2002, 2271, 3000, 5, 'backpack of icicle runes')
--shopModule:addBuyableItemContainer({'bp ih'}, 2003, 2265, 1900, 1, 'backpack of intense healing runes')
--shopModule:addBuyableItemContainer({'bp lmm'}, 3940, 2287, 800, 10, 'backpack of light magic missile runes')
--shopModule:addBuyableItemContainer({'bp mwall'}, 2004, 2293, 7000, 3, 'backpack of magic wall runes')
--shopModule:addBuyableItemContainer({'bp para'}, 5949, 2278, 14000, 1, 'backpack of paralyze runes')
--shopModule:addBuyableItemContainer({'bp poison bomb'}, 3940, 2286, 3400, 2, 'backpack of poison bomb runes')
--shopModule:addBuyableItemContainer({'bp poison field'}, 3940, 2285, 1300, 3, 'backpack of poison field runes')
--shopModule:addBuyableItemContainer({'bp poison wall'}, 3940, 2289, 4200, 4, 'backpack of poison wall runes')
--shopModule:addBuyableItemContainer({'bp soulfire'}, 2000, 2308, 2800, 3, 'backpack of soulfire runes')
--shopModule:addBuyableItemContainer({'bp stalagmite'}, 3940, 2292, 2400, 10, 'backpack of stalagmite runes')
--shopModule:addBuyableItemContainer({'bp stone shower'}, 3940, 2288, 3000, 4, 'backpack of stone shower runes')
--shopModule:addBuyableItemContainer({'bp sd'}, 2003, 2268, 6500, 3, 'backpack of sudden death runes')
--shopModule:addBuyableItemContainer({'bp thunderstorm'}, 2001, 2315, 3000, 4, 'backpack of thunderstorm runes')
--shopModule:addBuyableItemContainer({'bp uh'}, 2002, 2273, 3500, 1, 'backpack of ultimate healing runes')
--shopModule:addBuyableItemContainer({'bp wild growth'}, 2002, 2269, 6400, 2, 'backpack of wild growth runes')